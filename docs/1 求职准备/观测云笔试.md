---
Author: sync
date: 2022-11-06 22:29 Sunday
tag: null
---

## 题目

1. 通过 func 爬取数据；
2. 得到数据放到观测云里；
3. 通过 dql 查数据，取到 func 里；
4. 通过 func 兼容的算法包进行分析-建模-预测-验证；
5. 通过观测云仪表盘进行可视化。

## 1.  通过 func 爬取数据

使用 `python` 编写程序抓取指定年指定月的数据（年月反应在 `url` 中）
- 使用 `request` 包获取网页内容
- 使用 `BeatuifulSoup` 包提取网页表格内容
- 转换成 `DataFrame` 格式内容

```python
import requests
from bs4 import BeautifulSoup
import pandas as pd
import os

def url_table_to_pandas(url):
    '''
    request html data from url
    find_all table
    table to pandas
    '''

    kv = {'user-agent': 'Mozilla/5.0'}  # 伪装成浏览器，headers
    content = requests.get(url, headers=kv)

    table = BeautifulSoup(content.text, 'lxml').find_all('table')

    df = pd.read_html(str(table))[0]
    # Format dataframe
    df.columns = df.loc[0, :]
    df = df[1: ]

    return df
```

## 2. 得到数据放到观测云里
